---
title: 索引
toc: true
date: 2022-04-12 22:18:18
tags: 数据库
categories: 数据库
---

# 1.两种基本的索引类型
顺序索引和散列索引：
- 顺序索引              （基于值的顺序排序）
    - 聚集索引 （记录的物理排列顺序和索引一致）
    - 非聚集索引（记录的物理排列顺序和索引不一致）
聚集和非聚集的区别在于记录的排列顺序和索引的排列顺序是否一致，因此一个表只能包含一个聚集索引。
    - 稠密索引 （文件中的每一个搜索码值都有一个索引记录）
    - 稀疏索引  （只为搜索码的某些值建立索引）
非聚集索引必须是稠密索引，而聚集索引可以是稀疏索引，因为聚集索引的排列顺序和记录排列顺序一致，可以沿索引项指向的记录开始，沿文件中的指针查找，直到找到所需记录。
    - 多级索引
- 散列索引              （基于值平均分布到若干散列桶中）

# 2. Mysql存储引擎MyISAM和InnoDB
MyISAM和InnoDB ，InnoDB是MySQL5.5之后的默认存储引擎。
MyISAM和InnoDB区别：
- InnoDB 支持事务，MyISAM 不支持
- InnoDB 支持外键，MyISAM 不支持
- InnoDB 是聚集索引，B+Tree作为索引结构，数据文件是和索引绑在一起的，必须要有主键，通过主键索引效率很高；MyISAM 是非聚集索引，数据文件是分离的，索引保存的是数据文件的指针，主键索引和辅助索引是独立的。InnDB使用辅助索引查询时需要查询两次，先查询到主键，然后再通过主键查询到数据。MyISAM是非聚集索引，也是用 B+树作为索引结构，索引和数据文件分离，索引保存的是数据文件的指针。也就是说：InnoDB的B+树主键索引的叶子节点就是数据文件，辅助索引的叶子节点是主键的值；而MyISAM的B+树主键索引和辅助索引的叶子节点都是数据文件的地址指针。
- Innodb 不支持全文索引，而MyISAM支持全文索引，查询效率上 MyISAM 要高；PS：5.7以后的InnoDB支持全文索引了。
- InnoDB 不保存表的具体行数，MyISAM 用一个变量保存了整个表的行数。
- InnoDB 支持行级锁(row-level locking)和表级锁,默认为行级锁；MyISAM 采用表级锁(table-level locking)。
# 2.B+树结构
更新中...


